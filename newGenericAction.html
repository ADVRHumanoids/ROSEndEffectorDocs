

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>How to add a new Generic action in the system &mdash; ROSEndEffector 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ROS End-Effector HAL" href="eeHal.html" />
    <link rel="prev" title="How to retrieve the Grasping Action Created" href="receiveActionsInfo.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ROSEndEffector
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">How to use ROS End-Effector with your end-effector</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples with ready to use end-effectors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The Main Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="actions.html">ROS End-Effector Grasping Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="findActions.html">FindActions</a></li>
<li class="toctree-l1"><a class="reference internal" href="receiveActionsInfo.html">How to retrieve the Grasping Action Created</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to add a new Generic action in the system</a></li>
<li class="toctree-l1"><a class="reference internal" href="eeHal.html">ROS End-Effector HAL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Further steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rosTopics.html">ROS Topics Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="mimicJoint.html">End-Effector and their coupled joints</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Packages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="roseeGui.html">ROS End-Effector GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="roseeGazeboPlugins.html">ROS End-Effector Gazebo Plugins</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Possible Issues</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="googleTests.html">Advanced</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ROSEndEffector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>How to add a new Generic action in the system</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/newGenericAction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-add-a-new-generic-action-in-the-system">
<span id="newgenericaction"></span><h1>How to add a new Generic action in the system<a class="headerlink" href="#how-to-add-a-new-generic-action-in-the-system" title="Permalink to this headline">¶</a></h1>
<p>When ROSEE main node is running, you may want to introduce a new action in the system, such that you can command it afterwards. This is possible through a dedicated ROS service.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The action will belong to the <em>generic</em> category</p>
</div>
<p>The request is composed as following:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">## Service associated with GenericGraspingAction message</span>

NewGenericGraspingAction newAction

<span class="c1"># user can also request to store the action in a yaml file, togheter with the others</span>
bool emitYaml

---

<span class="c1"># the service will give true if action is good and it is inserted in the structure</span>
bool accepted

<span class="c1"># true false depending if emission on yaml file is successful</span>
bool emitted

<span class="c1"># string containing useful info about a possible not acceptance</span>
string error_msg
</pre></div>
</div>
<p>Where NewGenericGraspingAction is defined as:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># Message which include all the infos necessary to insert a new action in the system</span>
<span class="c1"># (https://github.com/ADVRHumanoids/ROSEndEffector/issues/71)</span>

<span class="c1"># name of the action</span>
string action_name

<span class="c1"># Motor Position</span>
MotorPosition action_motor_position

<span class="c1"># OPTIONAL The mask which says if the motor is used by the action (count &gt; 0) or not (count = 0).</span>
<span class="c1"># take care that if it is not included, the not used joint will be considered the ones with 0 position</span>
JointsInvolvedCount action_motor_count

<span class="c1"># OPTIONAL field to indicate which hand element will be moved by the action</span>
string<span class="o">[]</span> elements_involved
</pre></div>
</div>
<p>Hence you can call the service from usual c++ code or also from terminal for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosservice call /ros_end_effector/new_generic_grasping_action <span class="s2">&quot;newAction:</span>
<span class="s2">        action_name: &#39;newFancyAction&#39;</span>
<span class="s2">        action_motor_position:</span>
<span class="s2">          name:</span>
<span class="s2">          - &#39;joint_1&#39;</span>
<span class="s2">          - &#39;joint_2&#39;</span>
<span class="s2">          position:</span>
<span class="s2">          - 1</span>
<span class="s2">          - 2</span>
<span class="s2">emitYaml: true&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some checks are performed when calling the action (eg no action with the same name must exists, consistency among motor position and motor count…)
but NO CHECKS are performed to see if the name of the joints are the correct ones. Remember to put ALL the motors in the action_motor_position field!</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="eeHal.html" class="btn btn-neutral float-right" title="ROS End-Effector HAL" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="receiveActionsInfo.html" class="btn btn-neutral float-left" title="How to retrieve the Grasping Action Created" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Luca Muratore, Davide Torielli.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>